# 데이터 분석, 그것이 알고 싶다!

## **데이터 분석이란 무엇일까요? 😀**

데이터 분석은 비즈니스 의사 결정에 유용한 정보를 찾기 위해 데이터 정리 - 변환 - 모델링(modeling)의 과정을 거치는 것을 말합니다. 정확히는 다음과 같이 다섯 단계로 나눌 수 있어요!

![1_1](https://user-images.githubusercontent.com/80409179/114968375-2873a680-9eb1-11eb-9268-9e43f6cf16a4.png)


                                         이미지출처 -  [https://velog.io/@kimdukbae/데이터-전처리-이론-및-실습1](https://velog.io/@kimdukbae/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%84%EC%B2%98%EB%A6%AC-%EC%9D%B4%EB%A1%A0-%EB%B0%8F-%EC%8B%A4%EC%8A%B51)

### 1. 문제 정의 단계

![1_2](https://user-images.githubusercontent.com/80409179/114968417-404b2a80-9eb1-11eb-88ab-47ca65308ce0.png)

                                                                                    이미지출처 - [https://brunch.co.kr/@data/10](https://brunch.co.kr/@data/10)

데이터 분석은 문제를 정의함으로써 그 데이터에서 얻고자 하는 목표를 정확하게 설정하는 데서 시작해요. 이 단계를 소홀히 하면 분석 과정에서 혼란이 가중되어 성과를 얻기 힘들어요. 마치 나침반 없이 바다를 항해하는 것과 같죠. 간단해 보이지만 매우 중요한 단계입니다.

문제 정의를 잘하기 위해서는 분석하고자 하는 분야를 이해하고, 해결해야할 문제를 객관적으로 구체적으로 정의해야 합니다.

### 2. 데이터 수집 단계

![1_3](https://user-images.githubusercontent.com/80409179/114969492-71c4f580-9eb3-11eb-953c-a4df05bdbd36.png)

데이터 수집이란 **분석에 필요한 데이터 요건을 정의하고, 데이터를 확보하는 단계예요.**

이때 `데이터 엔지니어의 역할이 큰 비중을 차지합니다. 데이터 수집 단계가 어려운 이유는 원하는 데이터가 존재하지 않거나 또는 너무 많기 때문이에요. 또한 수집 시에는 비용과 법적인 문제가 발생할 수 있으니 조심해야 해요!

![1_4](https://user-images.githubusercontent.com/80409179/114969493-71c4f580-9eb3-11eb-9aee-65cd941e354e.png)

이미지출처 - [https://www.globalpatron.com/blog/data-collection-methods/](https://www.globalpatron.com/blog/data-collection-methods/)

데이터 수집에는 여러 방법이 있습니다.

예를 들어 빨간 스포츠카🚗의 사고 비율은 다른 자동차에 비해 높은가❓❔ 라는 질문에 대해서는 경찰 사고 보고서, 보험 청구 및 입원 세부 정보와 같은 소스에서 데이터 수집이 가능하겠죠?

그 외에도 최근 데이터 수집 방법에는 데이터 구매, 실험환경에서 수집(스스로 데이터 생성), 웹 크롤링, open datasets을 활용하는 방법이 있습니다.

### 3. 데이터 전처리 단계

 

![1_5](https://user-images.githubusercontent.com/80409179/114969494-725d8c00-9eb3-11eb-97a7-13bf376306dd.png)

이미지출처 - [https://medium.datadriveninvestor.com/data-preprocessing-feature-engineering-in-machine-learning-530ccc38d01a](https://medium.datadriveninvestor.com/data-preprocessing-feature-engineering-in-machine-learning-530ccc38d01a)

> *👴 : "데이터 과학의 80%는 데이터 클리닝에 소비되고, 나머지 20%는 데이터 클리닝하는 시간을 불평하는데 쓰인다." - 안토니 골드블룸 (Kaggle 창시자)*

여기서 말하는 데이터 클리닝은 바로 **'데이터 전처리'**를 말해요. 과연 데이터 전처리가 무엇이길래 이렇게 중요하다는 걸까요?🤔

바로 전 단계에서 수집한 데이터가 분석에 바로 쓰이는 경우는 거의 없다고 해요. 수집된 데이터를 살펴보면 중간 중간 데이터가 누락되거나 잘못된 값이 들어가 있는 경우도 많고요, 그 외에도 데이터 형식이 처리에 용이하지 않은 형식이라 가공이 필요한 경우도 있다고 합니다. 이렇게 데이터를 사용하기 전에는 데이터의 상태와 가치를 파악하는 시간이 필요해요!

 

![1_6](https://user-images.githubusercontent.com/80409179/114969495-72f62280-9eb3-11eb-86c1-8aa99b3846db.png)

이미지출처 - [https://subscription.packtpub.com/book/big_data_and_business_intelligence/9781838555078/1/ch01lvl1sec04/data-preprocessing](https://subscription.packtpub.com/book/big_data_and_business_intelligence/9781838555078/1/ch01lvl1sec04/data-preprocessing)

 또한 문자로 이루어진 범주형 데이터의 경우, 더 원활한 처리를 위해 숫자로 바꾸기도 합니다. 예를 들면 월요일은 1, 화요일은 2 같은 형식으로요. 또는 수치데이터의 분포를 정규화(normalize)하기도 하는데, 동일한 대상을 평가하는데 10점 만점과 100점 만점으로 각각 다르게 처리했다면 이 분포를 동일하게 바꿔줘야 하겠죠?

데이터 전처리의 형태는 크게 세가지로 나뉩니다. 필요한 데이터를 골라내는 ‘데이터 필터링’, 다음으로 데이터의 형식을 변경하는 ‘데이터 변환’, 그리고 여러 소스에서 온 데이터를 합치는 작업인 ‘데이터 통합’입니다.

### 4. 데이터 모델링 단계

자, 이제 데이터 전처리 과정이 끝나고 본격적인 데이터 분석에 들어갈 차례예요! 🙆‍♀️ 먼저 데이터 모델링인데요, 데이터 모델링이란 주어진 개념으로부터 논리적인 데이터 모델을 구성하는 작업을 말해요. 이를 위해 데이터베이스의 골격을 이해하고 그 이해를 바탕으로 모델의 기능과 성능의 측면에서 작성이 되어야 해요.

![1_7](https://user-images.githubusercontent.com/80409179/114969496-738eb900-9eb3-11eb-929b-94066c864b83.png)

이미지 출처 - [https://www.astera.com/type/blog/understanding-data-modeling-tools/](https://www.astera.com/type/blog/understanding-data-modeling-tools/) 

좀 더 구체적으로 얘기해 볼까요? 분석의 규모가 커지면 다수의 테이블을 이용하게 되는데, 이 여러 개의 테이블을 연계하는 행위를 관계 설정 또는 모델링이라고도 불러요. 대표적인 모델링 기법으로는 ‘스타 스키마’가 있는데요, 스타 스키마는 한 개의 사실(fact)테이블과 여러 개의 차원(dimension)으로 구성되어 있습니다. 사실 테이블은 핵심적인 사실(사건, 거래 등의 관측값)의 기록으로 이루어지며, 차원 테이블은 추가적인 사실(일시, 장소 등)의 기록으로 이루어지는게 보통입니다. 이렇게 데이터 분석 과정에서 대상을 나누고 쪼개면서 그 결과를 사실테이블과 차원테이블로 구성하는 것이 모델링의 핵심입니다.

아래 첨부된 사진 들은 데이터 모델링의 예시입니다. 가운데 사실테이블과 주변의 차원테이블이 꼭 ⭐(star)모양과 닮아있지 않나요?

![1_8](https://user-images.githubusercontent.com/80409179/114969497-738eb900-9eb3-11eb-8609-663b9dcf96b8.png)
![1_9](https://user-images.githubusercontent.com/80409179/114969498-74274f80-9eb3-11eb-99a3-3f35681e4cf5.jpg)
![1_10](https://user-images.githubusercontent.com/80409179/114969499-74bfe600-9eb3-11eb-88a3-04376ccc535e.jpg)

이미지출처

[https://docs.microsoft.com/ko-kr/power-bi/guidance/star-schema](https://docs.microsoft.com/ko-kr/power-bi/guidance/star-schema)

[https://ko.myservername.com/schema-types-data-warehouse-modeling-star-snowflake-schema](https://ko.myservername.com/schema-types-data-warehouse-modeling-star-snowflake-schema)

[http://databaser.net/moniwiki/wiki.php/차원모델링-고급주제](http://databaser.net/moniwiki/wiki.php/%EC%B0%A8%EC%9B%90%EB%AA%A8%EB%8D%B8%EB%A7%81-%EA%B3%A0%EA%B8%89%EC%A3%BC%EC%A0%9C)

### 5. 시각화 및 탐색 단계

 모델링을 통해 결과가 도출되면 이를 처음 정의했던 문제와 연관시켜 문제를 해결하는 방법을 모색하는 단계예요! 시각화를 통해 도출된 결과를 알아보기 쉽게 표현하고, 이를 근거로 활용할 수도 있어요.

머신러닝, 딥러닝 기술이 아무리 유용하다고 해도 데이터를 다룰 때 가장 많이 사용하는 방법은 시각화라고 합니다. 당장 보고서, 발표자료를 만들거나 급하게 데이터를 확인할 때 시각화 만큼 이해가 빠르고 유용하게 써먹을 수 있는 기술이 드물기 때문이에요.

시각화 및 탐색 단계는 문제 정의 단계에서 정의한 문제에 대한 답을 찾는 단계입니다. 대부분의 데이터는 숫자와 문자로 이루어져 있지요? 하지만 사람의 인지 능력은 한계가 있기 때문에 한번에 많은 양의 데이터를 받아들이고 해석하기란 불가능에 가깝습니다.

아래 사진을 봐주세요. 10년간 서울의 미세먼지 농도에 대한 데이터를 글로 표현한다면 A4용지로 6만장이 넘습니다. 에고 이걸 언제 다보나요,, 생각만 해도 눈앞이 깜깜하죠?🤮

하지만 오른쪽과 같이 그래프로 표현함으로써 데이터를 요약하여 변화 추이를 한 눈에 파악할 수 있습니다. 어때요, 미세먼지는 감소↘ 추세이고, 초미세먼지는 증가↗하고 있다는 게 보이지 않나요?

이렇게 데이터 시각화는 대량의 데이터를 요약하고 사람이 판단하기 쉬운 형태의 이미지로 표현함으로써 데이터 안에 숨겨진 유의미한 인사이트를 발견할 수 있도록 도와줍니다.

![1_11](https://user-images.githubusercontent.com/80409179/114969479-6d98d800-9eb3-11eb-86b3-6089c96a7846.png)

이미지 출처  - [https://brunch.co.kr/@data/10](https://brunch.co.kr/@data/10)

데이터 시각화를 너무 어렵게 생각하진 마세요! 시각화를 할 때에는 **첫번째로 데이터가 어떤 내용인지 확인하고, 다음에 목적에 맞게 어떤 차트를 쓸지 설정**하면 금방 생성이 가능해요. 지금부터 기초 시각화를 4가지 차트 유형을 중심으로 알아볼까요?

### 1. 막대차트

막대차트는 보편적으로 가장 많이 사용되는 차트예요! 그만큼 안정적이라는 거죠.😌 막대차트는 양(amounts)을 비교할 때 쓰이는데요, 예를 들어 부서 별 성과 비교, 학생 성적 비교, 연도별 성과 비교와 같이 카테고리가 분명할때 양을 나열하고 확인하기위해 쓰입니다.

![1_12](https://user-images.githubusercontent.com/80409179/114969482-6eca0500-9eb3-11eb-9bd8-7ea55d275e32.png)

이미지 출처  - [https://brunch.co.kr/@eqo295/4](https://brunch.co.kr/@eqo295/4)

위 사진은 막대차트의 예시입니다. A~E 학생의 과목별 성적을 나타냈는데요, 이렇게 막대 색깔은 카테고리 별로 다르게 설정할 수도 있고, 데이터 값에 따라서 값이 높을수록 색이 더 진해지게 설정하는 방법도 있습니다. 위 예시처럼 일반적으로 막대는 세로방향을 사용하지만, 공간 배치등의 문제로 때에 따라서는 가로 방향을 쓰는 경우도 있습니다.

### 2. 파이 & 트리맵

파이차트는 막대차트와는 다르게 '양'보다 '비율'을 볼때 많이 사용합니다. 전체에서 각 카테고리가 차지하고 있는 비중을 한눈에 볼 때 유용합니다. 예를 들어 부서별 예산 지출 비율이나, 총 칼로리에서 각 성분이 차지하는 비율 등이 있습니다. 

![1_13](https://user-images.githubusercontent.com/80409179/114969485-6f629b80-9eb3-11eb-8e27-7ebf1ac791dc.png)

이미지 출처 - [https://wikidocs.net/92114](https://wikidocs.net/92114)

파이는 위 예시와 같이 1차원으로 표현하는 것이 보통입니다. 다양한 코드를 통해 각 비율간 떨어지는 거리, 색상, 도넛 모양 등 다양한 형태로 설정이 가능합니다.

![1_14](https://user-images.githubusercontent.com/80409179/114969486-6f629b80-9eb3-11eb-8d10-252626c08041.png)

이미지 출처 - [http://linkit.kr/data-visualization-gallery/#treemap](http://linkit.kr/data-visualization-gallery/#treemap)

트리맵의 경우 파이차트와 유사하지만, 공간을 좀 더 효율적으로 사용할 수 있다는 장점이 있습니다.

위 사진은 2011년 산불 피해 현황을 나타낸 트리맵 예시입니다. 차지하는 비율이 클수록 1) 면적이 커지고, 2) 색의 농도도 진해져 한눈에 파악이 쉽죠?

### 3. 산포도 + 회귀선

산포도는 한 요인과 나머지 요인과의 관계를 파악할 때 유용하게 쓰입니다. 산포도를 사용할 경우 많은 수의 데이터를 한번에 볼 수 있습니다. 이런 특징으로 인해 다양한 머신러닝 분석(Regression, Clustering)에 활용되고 있다고 합니다. 예를 들어 소득이 자녀의 성적에 미치는 영향, 소속 별 특징 등을 확인할 수 있겠죠?

![1_15](https://user-images.githubusercontent.com/80409179/114969488-6ffb3200-9eb3-11eb-9522-d8d5e6c1331b.png)

이미지 출처  - [https://brunch.co.kr/@eqo295/4](https://brunch.co.kr/@eqo295/4)

붓꽃 데이터로 만든 산포도와 회귀선의 예시입니다.

각 그룹 별로 색깔을 다르게 주어 구분을 명확히 하였습니다. 그리고 산포도 위에 회귀선을 추가해 관계를 좀 더 뚜렷히 파악이 가능해졌습니다.

### 4. 히스토그램

히스토그램은 데이터가 어떻게 펼쳐져 있나, 즉 데이터 분포를 확인하는 차트 유형으로, 얼핏 보면 막대차트와 유사해 보이지만 그 목적은 다릅니다. 데이터 과학, 특히 통계 분야에서 가장 기초적으로 연습하는 시각화 방법으로, 히스토그램을 그리고 나서 어떤 통계적 기법을 적용할 지 다양하게 생각할 수 있습니다. 일반적으로는 이상한 값이나 특이점을 파악하기 위해 사용된다고 해요. 예를 들어 한 사람의 몸무게나 혈당치가 비정상적으로 높은 경우, 성적이나 수입이 특이하게 나오는 경우에 사용할 수 잇습니다.

![1_16](https://user-images.githubusercontent.com/80409179/114969489-7093c880-9eb3-11eb-90f0-317ac3111750.png)

이미지 출처  - [https://brunch.co.kr/@eqo295/4](https://brunch.co.kr/@eqo295/4)

예시를 보세요. 어느 한 구간은 비어있고, 낮은 값의 빈도가 크다는 특이점이 있죠?

![1_17](https://user-images.githubusercontent.com/80409179/114969490-712c5f00-9eb3-11eb-92c8-350592ae9e95.png)

이미지 출처  - [https://brunch.co.kr/@eqo295/4](https://brunch.co.kr/@eqo295/4)

Bin이라고 불리는 구간 간격을 조절해 데이터의 해상도를 높이거나 낮출 수 있습니다. 다시 말해 크게 자세히 보거나 작게 한눈에 볼 수 있어요!

지금까지 대표적인 4가지 데이터 시각화의 차트 유형을 살펴 보았는데요, 실제로 데이터 시각화에서 사용되는 차트는 이것보다도 훨씬! 훨~씬🙆‍♀️ 많답니다. 응용까지 생각하면  시각화 하나로도 수십~수백개의 조합이 나온다고 해요. 😵 하지만 걱정 마세요! 자신 있는 차트 하나만 잘 다루더라도 데이터의 많은 부분을 쉽게 파악하고, 효율적으로 전달할 수 있는 무기가 될 것입니다.🛠

![1_18](https://user-images.githubusercontent.com/80409179/114969491-712c5f00-9eb3-11eb-9f4c-8431917fdc44.jpg)

짝짝짝!! 수고하셨습니다!! 👏👏👏

이렇게 데이터 분석에 관한 기초 개념이 끝이 났어요. 여기까지 온 것 만으로도 정말 대단해요! 데이터 분석은 알아갈수록 더 깊고 넓은 분야이지만 오늘 배운 내용 만으로 여러분은 데이터 분석과 한발짝 가까워졌어요. 

다음 파트에서는 데이터 분석의 가장 기초적인 도구인 판다스에 대해서 알아보도록 하겠습니다! 그럼 다음 시간에 만나요! 안녕~~
